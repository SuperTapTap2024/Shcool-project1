<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>×—×™×“×ª ×”×›× ×¡×ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    .lock {
      border: 2px solid #ccc;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 10px;
    }
    .hidden {
      display: none;
    }
    button {
      margin-top: 10px;
    }
    .color-option {
      display: inline-block;
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }
    .selected {
      outline: 3px solid black;
    }
    #color-sequence {
      margin-top: 10px;
    }
    #map {
      width: 100%;
      height: 300px;
      background-color: #eee;
      text-align: center;
      line-height: 300px;
      font-weight: bold;
      cursor: pointer;
    }
    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 60px);
      gap: 10px;
      margin-top: 10px;
    }
    .keypad button {
      height: 60px;
      font-size: 18px;
    }
    
    /* ×”×’×“×œ×ª ×›×¤×ª×•×¨×™ ×¡×™×•× ×•×”×ª×—×œ ××—×“×© */
    #doneBtn,
    #resetBtn {
      font-size: 24px;
      padding: 15px 30px;
      margin: 10px 5px;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>×—×™×“×ª ×”×›× ×¡×ª</h1>

<div class="lock" id="lock1">
  <h2>ğŸ”’ ×× ×¢×•×œ ×¨××©×•×Ÿ</h2>
  <p>×‘××™×–×• ×©× ×” × ×—× ×š ××©×›×Ÿ ×”×›× ×¡×ª ×”× ×•×›×—×™?</p>
  <div id="code-display" dir="ltr" style="text-align: left;font-size: 24px;">____</div>
  <div class="keypad">
    <button onclick="enterDigit('1')">1</button>
    <button onclick="enterDigit('2')">2</button>
    <button onclick="enterDigit('3')">3</button>
    <button onclick="enterDigit('4')">4</button>
    <button onclick="enterDigit('5')">5</button>
    <button onclick="enterDigit('6')">6</button>
    <button onclick="enterDigit('7')">7</button>
    <button onclick="enterDigit('8')">8</button>
    <button onclick="enterDigit('9')">9</button>
    <button onclick="clearCode()">âŒ«</button>
    <button onclick="enterDigit('0')">0</button>
    <button onclick="resetCode()">ğŸ§¹</button>
  </div>
</div>

<div class="lock" id="lock2">
  <h2>ğŸ”’ ×× ×¢×•×œ ×©× ×™</h2>
  <p>××”×• ×¡×“×¨ ×”×©××•×ª ×œ×¤×™ ×›×”×•× ×ª× ×›×™×•"×¨ ×”×›× ×¡×ª?</p>
  <div id="color-options">
    <div class="color-option" style="background-color: green;" data-name="×¨×™×‘×œ×™×Ÿ">×¨×™×‘×œ×™×Ÿ</div>
    <div class="color-option" style="background-color: red;" data-name="×©××™×¨">×©××™×¨</div>
    <div class="color-option" style="background-color: orange;" data-name="××“×œ×©×˜×™×™×Ÿ">××“×œ×©×˜×™×™×Ÿ</div>
    <div class="color-option" style="background-color: blue;" data-name="××™×¦×™×§">××™×¦×™×§</div>
  </div>
  <div id="color-sequence"></div>
  <button onclick="resetColorSequence()">××¤×¡ ×‘×—×™×¨×”</button>
</div>

<div class="lock" id="lock3">
  <h2>ğŸ”’ ×× ×¢×•×œ ×©×œ×™×©×™</h2>
  <p>×”×™×›×Ÿ ×©×›× ×” ×”×›× ×¡×ª ×œ×¤× ×™ ××©×›× ×” ×”× ×•×›×—×™?</p>
  <img src="map.png" alt="××¤×”" height="200" />
  
  <!-- New options to choose from -->
  <div id="location-options" style="margin-top: 10px;">
    <button onclick="selectLocation('×‘×™×ª ×¤×¨×•××™×Ÿ')" style="margin: 5px;">×‘×™×ª ×¤×¨×•××™×Ÿ</button>
    <button onclick="selectLocation('×¨×—×•×‘ × ×™×¡×™× ×‘×›×¨')" style="margin: 5px;">×¨×—×•×‘ × ×™×¡×™× ×‘×›×¨</button>
    <button onclick="selectLocation('×›×™×›×¨ ×¦×™×•×Ÿ')" style="margin: 5px;">×›×™×›×¨ ×¦×™×•×Ÿ</button>
    <button onclick="selectLocation('×›×™×›×¨ ×‘×•×©')" style="margin: 5px;">×›×™×›×¨ ×‘×•×©</button>
  </div>
  
  <p id="map-answer" style="margin-top: 10px; font-weight: bold;"></p>
</div>

<div class="lock" id="lock4">
  <h2>ğŸ”’ ×× ×¢×•×œ ×¡×™×•×</h2>
  <p>"×¨××© ×××©×œ×” ×—×™×™×‘ ×œ×”×™×•×ª ×—×‘×¨ ×›× ×¡×ª" â€“ ×××ª ××• ×©×§×¨?</p>
  <select id="truth-select">
    <option value="">×‘×—×¨ ×ª×©×•×‘×”</option>
    <option value="true">×××ª</option>
    <option value="false">×©×§×¨</option>
  </select>
</div>

<button id="doneBtn" onclick="checkAnswersOnDone()">âœ… ×¡×™×•×</button>
<button id="resetBtn" onclick="location.reload()">ğŸ”„ ×”×ª×—×œ ××—×“×©</button>

<script>
  const correctYear = "1966";
  const correctSequence = ["×©××™×¨", "××™×¦×™×§", "×¨×™×‘×œ×™×Ÿ", "××“×œ×©×˜×™×™×Ÿ"];
  const correctTruth = "true";

  let codeInput = "";
  let colorAnswer = [];
  let mapClickedCorrect = false;

  function enterDigit(digit) {
    if (codeInput.length < 4) {
      codeInput += digit;
      updateCodeDisplay();
      // ×œ× ×§×•×¨××™× ×œ checkAllAnswers() ×›×™ ×œ× ××‘×¦×¢×™× ×”×©×‘×ª×ª ×›×¤×ª×•×¨
    }
  }

  function clearCode() {
    codeInput = codeInput.slice(0, -1);
    updateCodeDisplay();
  }

  function resetCode() {
    codeInput = "";
    updateCodeDisplay();
  }

  function updateCodeDisplay() {
    let display = codeInput.padEnd(4, "_").split("").join(" ");
    document.getElementById("code-display").textContent = display;
  }

  document.querySelectorAll('.color-option').forEach(el => {
    el.addEventListener('click', () => {
      if (colorAnswer.length < 4 && !colorAnswer.includes(el.dataset.name)) {
        colorAnswer.push(el.dataset.name);
        el.classList.add("selected");
        updateColorSequence();
      }
    });
  });

  function updateColorSequence() {
    document.getElementById('color-sequence').innerText = colorAnswer.join(" â† ");
  }

  function resetColorSequence() {
    colorAnswer = [];
    document.getElementById('color-sequence').innerText = "";
    document.querySelectorAll('.color-option').forEach(el => el.classList.remove("selected"));
  }

  let mapSelectedLocation = null;
  const correctLocation = "×‘×™×ª ×¤×¨×•××™×Ÿ";

  function selectLocation(location) {
    mapSelectedLocation = location;
    const answerElem = document.getElementById('map-answer');
    answerElem.innerText = `×‘×—×¨×ª: ${location}`;
    mapClickedCorrect = (location === correctLocation);
  }

  document.getElementById('truth-select').addEventListener('change', () => {
    // ×œ× ×¢×•×©×™× ×›×œ×•× ×›×¨×’×¢
  });

  function checkAllAnswers() {
    const yearCorrect = codeInput === correctYear;
    const colorCorrect = JSON.stringify(colorAnswer) === JSON.stringify(correctSequence);
    const mapCorrect = mapClickedCorrect;
    const truthCorrect = document.getElementById('truth-select').value === correctTruth;

    return yearCorrect && colorCorrect && mapCorrect && truthCorrect;
  }

  function checkAnswersOnDone() {
    if (checkAllAnswers()) {
      alert('×›×œ ×”×›×‘×•×“! ×¤×ª×¨×ª ××ª ×›×œ ×”×—×™×“×•×ª!');
    } else {
      alert('× ×¡×• ×©× ×™×ª');
    }
  }

  updateCodeDisplay();
</script>

</body>
</html>
